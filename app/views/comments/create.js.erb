<% if @comment.valid? %>
    // escape_javascript, which will ensure the HTML generated by the render is displayed by the Ajax response
	$('.js-comments').prepend("<%= escape_javascript(render(@comment)) %>");
	$('.new-comment').html("<%= escape_javascript(render partial: 'comments/form', locals: {comment: @new_comment, post: @post}) %>");
<% else %>
	$('.flash').prepend("<div class='alert alert-danger><button type='button' class='close' data-dismiss='alert'>&times; </button><%= flash[:error] %></div>");
	$('.new-comment').html("<%= escape_javascript(render partial: 'comments/form', locals: { post: @post, comment: @comment }) %>");
<% end %>

